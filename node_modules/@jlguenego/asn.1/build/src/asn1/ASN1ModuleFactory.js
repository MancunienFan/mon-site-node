"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ASN1ModuleFactory = void 0;
const ASN1CstParser_1 = require("../analysis/ASN1CstParser");
const ASN1Lexer_1 = require("../analysis/ASN1Lexer");
const ASN1Visitor_1 = require("../analysis/ASN1Visitor");
class ASN1ModuleFactory {
    static compile(definition) {
        const output = ASN1Lexer_1.ASN1Lexer.tokenize(definition);
        const parserInstance = new ASN1CstParser_1.ASN1CstParser();
        parserInstance.input = output.tokens;
        const cstOutput = parserInstance.ModuleDefinition();
        if (parserInstance.errors.length > 0) {
            throw Error('Syntax error:\n' + parserInstance.errors[0].message);
        }
        const toAstVisitorInstance = new ASN1Visitor_1.ASN1Visitor();
        const ast = toAstVisitorInstance.visit(cstOutput);
        return ast;
    }
}
exports.ASN1ModuleFactory = ASN1ModuleFactory;
//# sourceMappingURL=ASN1ModuleFactory.js.map